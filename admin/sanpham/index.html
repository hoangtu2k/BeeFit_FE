<main id="main" class="main">
  <section class="section dashboard">

    <div class="pagetitle">
      <h1>Lọc</h1>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="row">
          <div class="col-12">

            <div class="row">
              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="danhmuc" ng-click="filter()">
                    <option value>Tất cả danh mục</option>
                    <option ng-repeat="danhmuc in listCategory" value="{{danhmuc.id}}"> {{danhmuc.name}}</option>
                  </select>
                  <label for>Danh mục</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="thuonghieu" ng-click="filter()">
                    <option value>Tất cả thương hiệu</option>
                    <option ng-repeat="thuonghieu in listBrand" value="{{thuonghieu.id}}"> {{thuonghieu.name}}</option>
                  </select>
                  <label for>Thương hiệu</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="thietke" ng-click="filter()">
                    <option value>Tất cả thiết kế</option>
                    <option ng-repeat="thietke in listDesign" value="{{thietke.id}}"> {{thietke.name}}</option>
                  </select>
                  <label for>Thiết kế</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="kieuco" ng-click="filter()">
                    <option value>Tất cả kiểu cổ</option>
                    <option ng-repeat="kieuco in listNeckType" value="{{kieuco.id}}"> {{kieuco.name}}</option>
                  </select>
                  <label for="floatingSelect">Kiểu cổ</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="kieutay" ng-click="filter()">
                    <option value>Tất cả kiểu tay</option>
                    <option ng-repeat="kieutay in listHandType" value="{{kieutay.id}}"> {{kieutay.name}}</option>
                  </select>
                  <label for="floatingSelect">Kiểu tay</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="chatlieu" ng-click="filter()">
                    <option value>Tất cả chất liệu</option>
                    <option ng-repeat="chatlieu in listMaterial" value="{{chatlieu.id}}"> {{chatlieu.name}}</option>
                  </select>
                  <label for="floatingSelect">Chất liệu</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="mausac" ng-click="filter()">
                    <option value>Tất cả màu sắc</option>
                    <option ng-repeat="mausac in listColor" value="{{mausac.id}}"> {{mausac.name}}</option>
                  </select>
                  <label for="floatingSelect">Màu sắc</label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating mb-4">
                  <select class="form-select" id="kichthuoc" ng-click="filter()">
                    <option value>Tất cả kích thước</option>
                    <option ng-repeat="kichthuoc in listSize" value="{{kichthuoc.id}}"> {{kichthuoc.name}}</option>
                  </select>
                  <label for="floatingSelect">Kích thước</label>
                </div>
              </div>

              <div class="col-md-3">
                <label class="form-label">Khoảng Giá</label>
                
                <div class="range-slide">
                  <div class="d-flex mt-2">
                    <input id="rangeMin" ng-click="filter()" type="range" class="form-range flex-grow-1" max="9999999" min="0" step="1" value="0">
                    <input id="rangeMax" ng-click="filter()" type="range" class="form-range flex-grow-1" max="9999999" min="0" step="1" value="9999999">
                  </div>
                </div>
                
                <div class="d-flex justify-content-between">
                  <span>Từ <span id="min">0 đ</span></span>
                  <span>đến <span id="max">9,999,999 đ</span></span>
                </div>
              </div>

            </div>

            <div class="row">

              <div class="col-lg-4">

                <div class="product-search">
                  <div class="search-bar">
                    <form class="search-form d-flex align-items-center">
                      <input type="text" name="query" placeholder="Nhập mã hoặc tên sản phẩm" title="Tìm kiếm sản phẩm">
                      <button type="submit" title="Search"><i class="bi bi-search"></i></button>
                    </form>
                  </div><!-- End Search Bar -->
                </div>

              </div>

              <div class="col-lg-6">

                <a href="#/product/add" class="btn btn-primary" title="Thêm sản phẩm"><i class="far fa-plus"></i> Thêm
                  sản phẩm</a>
                <button ng-click="openImportExcel()" class="btn btn-primary" title="Import"><i
                    class="fas fa-fw fa-file-import"></i> Nhập file</button>
                <button ng-click="exportToExcel()" class="btn btn-primary" title="Xuất file"><i
                    class="fas fa-fw fa-file-export"></i> Xuất
                  file</button>

              </div>

            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="row">
          <div class="col-12">

            <div class="card">

              <div class="card-body">
                <!-- Tabs  -->
                <ul style="float: right;" class="nav nav-tabs nav-tabs-bordered d-flex" id="borderedTabJustified"
                  role="tablist">
                  <li class="nav-item flex-fill" role="presentation">
                    <button class="nav-link w-100 active" id="dangban-tab" data-bs-toggle="tab"
                      data-bs-target="#bordered-justified-dangban" type="button" role="tab" aria-controls="dangban"
                      aria-selected="true">Đang bán</button>
                  </li>
                  <li class="nav-item flex-fill" role="presentation">
                    <button class="nav-link w-100" id="ngungban-tab" data-bs-toggle="tab"
                      data-bs-target="#bordered-justified-ngungban" type="button" role="tab" aria-controls="ngungban"
                      aria-selected="false">Ngừng bán</button>
                  </li>
                </ul>

                <div class="tab-content pt-2" id="borderedTabJustifiedContent">
                  <div class="tab-pane fade show active" id="bordered-justified-dangban" role="tabpanel"
                    aria-labelledby="dangban-tab">
                    <table class="table">
                      <thead>
                        <th scope="row">Ảnh</th>
                        <th scope="row">Mã Sản Phẩm</th>
                        <th scope="row">Tên Sản Phẩm</th>
                        <th scope="row">Giá Bán</th>
                        <th scope="row">Trạng Thái</th>
                        <th scope="row" colspan="3">Thao tác</th>
                      </thead>
                      <tbody>
                        <tr ng-if="list.length > 0" ng-repeat="sp in pager.items">
                          <td>
                            <span ng-repeat="img in sp.product.productImages">
                              <span ng-if="img.mainImage == true">
                                <img style="width: 50px;height: 50px" alt src="{{img.url}}">
                              </span>
                            </span>
                            <div>
                              <span class="blinking-text" data-ng-init="getQuantity(sp)"><span
                                  ng-if="sp.quantityWarningText != null"><i
                                    class="bi bi-exclamation-triangle"></i></span>
                                <span ng-bind="sp.quantityWarningText"></span>
                              </span>
                            </div>
                          </td>
                          <td>{{sp.product.code}}</td>
                          <td>{{sp.product.name}}</td>
                          <td>{{sp.price | currency:'':0}} VNĐ</td>
                          <td>
                            <span class="badge"
                              ng-class="{'bg-success': sp.status === 0, 'bg-danger': sp.status !== 0}">
                              {{ sp.status === 0 ? 'Đang bán' : 'Dừng bán'
                              }}</span>
                          </td>
                          <td>
                            <button class="btn btn-light buttonbtn" ng-click="openChiTiet(sp.id)"><i
                                class="fa-solid fa-circle-info"></i></button>
                            <a href="#/product/update/{{sp.id}}"><button class="btn btn-indigo"><i
                                  class="fa-solid fa-pen-to-square"></i>
                                Sửa</button></a>
                            <a href><button ng-if="sp.status == 0" ng-click="delete(sp.id)" class="btn btn-indigo"><i
                                  class="fa-solid fa-pause"></i>
                                Dừng</button></a>
                          </td>
                        </tr>
                        <tr ng-if="list.length == 0">
                          <td colspan="13">
                            <div style="text-align: center;">
                              <div><img style="width: 80px; height: 80px;" src="../../assets/img/box.png">
                              </div>
                              <h4>Không có sản phẩm nào</h4>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="text-center" ng-if="list.length > 0">
                      <div class="btn-group" aria-label="Basic outlined example">
                        <button ng-click="pager.first()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angles-left"></i></button>
                        <button ng-click="pager.prev()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angle-left"></i></button>
                        <button type="button" class="btn btn-outline-secondary">{{pager.page+1}}
                          of
                          {{pager.count}}</button>
                        <button ng-click="pager.next()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angle-right"></i></button>
                        <button ng-click="pager.last()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angles-right"></i></button>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="bordered-justified-ngungban" role="tabpanel"
                    aria-labelledby="ngungban-tab">
                    <table class="table">
                      <thead>
                        <th scope="row">Ảnh</th>
                        <th scope="row">Mã Sản Phẩm</th>
                        <th scope="row">Tên Sản Phẩm</th>
                        <th scope="row">Giá Bán</th>
                        <th scope="row">Trạng Thái</th>
                        <th scope="row" colspan="3">Thao tác</th>
                      </thead>
                      <tbody>
                        <tr ng-if="listdhd.length > 0" ng-repeat="sp in pagerdhd.items">
                          <td>
                            <span ng-repeat="img in sp.product.productImages">
                              <span ng-if="img.mainImage == true">
                                <img style="width: 50px;height: 50px" alt src="{{img.url}}">
                              </span>
                            </span>
                            <div>
                              <span class="blinking-text" data-ng-init="getQuantity(sp)"><span
                                  ng-if="sp.quantityWarningText != null"><i
                                    class="fa-solid fa-triangle-exclamation"></i></span>
                                <span ng-bind="sp.quantityWarningText"></span>
                              </span>
                            </div>
                          </td>
                          <td>{{sp.product.code}}</td>
                          <td>{{sp.product.name}}</td>
                          <td>{{sp.price | currency:'':0}} VNĐ</td>
                          <td>
                            <span class="badge"
                              ng-class="{'bg-success': sp.status === 0, 'bg-danger': sp.status !== 0}">
                              {{ sp.status === 0 ? 'Đang bán' : 'Dừng bán'
                              }}</span>
                          </td>
                          <td>
                            <button ng-if="sp.status == 1" ng-click="delete1(sp.id)" class="btn btn-danger">
                              <i class="fa-solid fa-history"></i></button>
                          </td>
                        </tr>
                        <tr ng-if="listdhd.length == 0">
                          <td colspan="13">
                            <div style="text-align: center;">
                              <div><img style="width: 80px; height: 80px;" src="../../assets/img/box.png"></div>
                              <h4>Không có sản phẩm nào</h4>
                            </div>
                          </td>
                        </tr>
                    </table>
                    <div class="text-center" ng-if="listdhd.length > 0">
                      <div class="btn-group" role="group" aria-label="Basic outlined example">
                        <button ng-click="pagerdhd.first()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angles-left"></i></button>
                        <button ng-click="pagerdhd.prev()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angle-left"></i></button>
                        <button type="button" class="btn btn-outline-secondary">{{pagerdhd.pagerdhd+1}}
                          of
                          {{pagerdhd.count}}</button>
                        <button ng-click="pagerdhd.next()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angle-right"></i></button>
                        <button ng-click="pagerdhd.last()" type="button" class="btn btn-outline-secondary"><i
                            class="fa-solid fa-angles-right"></i></button>
                      </div>
                    </div>
                  </div>
                </div><!-- End Tabs  -->

              </div>

            </div>

          </div>
        </div>
      </div>
    </div>
    <!-- ======= end row ======= -->

    <div class="popup" ng-class="{ 'show': isnhapfile }">
      <div class="importExcel-content">
        <div>
          <div>
            <span class="card-title">Chọn file dữ liệu </span>
            <a ng-click="exportToExcelMau()" href="" style="float: right;">Tải mẫu file</a>
          </div>
          <br>
          <hr>
          <div style="float: right;">
            <button class="btn btn-danger" ng-click="openImportExcel()">X</button>
          </div>

        </div>

        <input type="file" id="fileInput" style="display: none;" accept=".xls, .xlsx">
        <button onclick="openExel()" class="btn btn-primary" id="uploadButton">Mở file</button>
        <button ng-click="importExel()" class="btn btn-primary" title="Import">Thực hiện</button>

      </div>
    </div>

    <div class="popup" ng-class="{ 'show': isChiTietSanPham }">
      <div class="detail-product">
        <!-- Nội dung của popup -->
        <button class="btn btn-danger" style="float: right;" ng-click="closeChiTiet()">X</button>
        <h1>Chi tiết sản phẩm </h1>
        <div class="row">
          <div class="col-md-3">
            <div id="qrcode"></div>
            <h5 class="card-title">Ảnh đại diện sản phẩm </h5>
            <span ng-repeat="img in form.product.productImages">
              <span ng-if="img.mainImage === true">
                <img id="output1" width="255px" src="{{img.url}}" />
              </span>
            </span>
            <img id="output" style="display: none;" />
            <h5 class="card-title">Danh sách ảnh sản phẩm</h5>

            <span ng-repeat="img in form.product.productImages">
              <span ng-if="img.mainImage === false">
                <img style="padding-top: 5px;" width="255px" id="output1" src="{{img.url}}" />
              </span>
            </span>
          </div>
          <div class="col-md-9">
            <div class="row">

              <div class="col-lg-7">
                <div class="row">
                  <label for="" class="col-form-label label--ctsp">Mã sản phẩm: <span
                      class="span--ctsp">{{form.product.code}} </span>
                  </label>
                  <label for="" class="col-form-label label--ctsp">Tên sản phẩm: <span
                      class="span--ctsp">{{form.product.name}} </span></label>
                  <label for="" class="col-form-label label--ctsp">Giá bán: <span class="span--ctsp">{{form.price |
                      currency:'':0}} VNĐ</span></label>
                  <label for="" class="col-form-label label--ctsp">Mô tả: <span class="span--ctsp">{{form.description}}
                    </span></label>
                  <label for="" class="col-form-label label--ctsp">Danh mục: <span ng-repeat="dm in listCategory"><span
                        class="span--ctsp" ng-if="dm.id == form.category.id">{{dm.name}}</span></span></label>
                  <label for="" class="col-form-label label--ctsp">Thương hiệu: <span ng-repeat="th in listBrand"><span
                        class="span--ctsp" ng-if="th.id == form.brand.id">{{th.name}}</span></span></label>
                  <label for="" class="col-form-label label--ctsp">Thiết kế: <span ng-repeat="tk in listDesign"><span
                        class="span--ctsp" ng-if="tk.id == form.design.id">{{tk.name}}</span></span></label>
                  <label for="" class="col-form-label label--ctsp">Kiểu tay: <span ng-repeat="kt in listHandType"><span
                        class="span--ctsp" ng-if="kt.id == form.handType.id">{{kt.name}}</span></span></label>
                  <label for="" class="col-form-label label--ctsp">Kiểu cổ: <span ng-repeat="kc in listNeckType"><span
                        class="span--ctsp" ng-if="kc.id == form.neckType.id">{{kc.name}}</span></span></label>
                  <label for="" class="col-form-label label--ctsp">Chất liệu: <span
                      ng-repeat="chatlieu in form.productDetail_materials"
                      class="span--ctsp">{{chatlieu.material.name}}, </span> </label>
                  <label for="" class="col-form-label label--ctsp">Chương trình khuyến mại:
                    <span ng-repeat="km in form.product.product_vouchers" class="span--ctsp">{{km.voucher.name}}
                      [{{km.voucher.code}}]</span> </label>
                </div>
              </div>

              <div class="col-lg-5">
                <div class="row">
                  <table class="table" style="margin-left: 5px;">
                    <thead>
                      <th scope="row">Màu</th>
                      <th scope="row">Size</th>
                      <th scope="row">Số lượng</th>
                    </thead>
                    <tbody>
                      <tr ng-repeat="pdsizecoloer in form.productDetail_size_colors">
                        <td>{{pdsizecoloer.color.name}}</td>
                        <td>{{pdsizecoloer.size.name}}</td>
                        <td>{{pdsizecoloer.quantity}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>
</main><!-- End #main -->